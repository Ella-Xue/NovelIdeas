"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var camelcase_1 = __importDefault(require("camelcase"));
var find_package_json_1 = __importDefault(require("find-package-json"));
var ENV_CONFIG_PREFIX = 'MONGOMS_';
var defaultValues = new Map();
function getPackageJson(directory) {
    var pjIterator = find_package_json_1.default(directory);
    return pjIterator.next().value;
}
function setDefaultValue(key, value) {
    defaultValues.set(key, value);
}
exports.setDefaultValue = setDefaultValue;
var packageJson;
function reInitializePackageJson(directory) {
    packageJson = getPackageJson(directory || process.cwd());
}
exports.reInitializePackageJson = reInitializePackageJson;
reInitializePackageJson();
function resolveConfig(variableName) {
    return (process.env["" + ENV_CONFIG_PREFIX + variableName] ||
        (packageJson &&
            packageJson.config &&
            packageJson.config.mongodbMemoryServer &&
            packageJson.config.mongodbMemoryServer[camelcase_1.default(variableName)]) ||
        defaultValues.get(variableName));
}
exports.default = resolveConfig;
//# sourceMappingURL=resolve-config.js.map