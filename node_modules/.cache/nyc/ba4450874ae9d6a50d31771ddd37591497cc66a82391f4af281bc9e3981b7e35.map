{"version":3,"sources":["app.js"],"names":["createError","require","express","path","cookieParser","logger","indexRouter","usersRouter","novels","author","user","app","set","join","__dirname","use","json","urlencoded","extended","static","get","userInfo","post","register","login","put","editPassword","findAll","findOne","addNovel","giveGrade","delete","deleteNovel","addAuthor","collectAuthor","removeCollection","req","res","next","err","locals","message","error","status","render","process","env","NODE_ENV","module","exports"],"mappings":"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","sourceRoot":"E:\\xueyi\\2020（1）\\AS\\NovelIdeas-master\\NovelIdeas-master","sourcesContent":["var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\n\nconst novels = require(\"./routes/novels\");\nconst author = require(\"./routes/author\");\nconst user = require(\"./routes/user\");\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'ejs');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\n\napp.get('/user/:id', user.userInfo);\napp.post('/user',user.register);\napp.post('/user/login',user.login);\napp.put('/user/:id', user.editPassword);\n\napp.get('/novels', novels.findAll);\napp.get('/novels/:id', novels.findOne);\napp.post('/novels',novels.addNovel);\napp.put('/novels/:id', novels.giveGrade);\napp.delete('/novels/:id', novels.deleteNovel);\n\napp.get('/author', author.findAll);\napp.get('/author/:id', author.findOne);\napp.post('/author', author.addAuthor);\napp.put('/author/:id/collect', author.collectAuthor);\napp.delete('/author/:id', author.removeCollection);\n\napp.use(function(req, res, next) {\n  next(createError(404));\n});\n\n// error handler\napp.use(function(err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\nif (process.env.NODE_ENV !== 'test') {\n  app.use(logger('dev'));\n}\nmodule.exports = app;\n"]}