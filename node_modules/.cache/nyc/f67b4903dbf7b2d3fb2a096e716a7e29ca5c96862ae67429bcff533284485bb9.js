var cov_docl10t1r=function(){var path="E:\\xueyi\\2020\uFF081\uFF09\\AS\\NovelIdeas-master\\NovelIdeas-master\\routes\\user.js";var hash="5f2a047b90032e678ff2535717ff969fa7621fa1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"E:\\xueyi\\2020\uFF081\uFF09\\AS\\NovelIdeas-master\\NovelIdeas-master\\routes\\user.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:36}},"1":{start:{line:3,column:14},end:{line:3,column:32}},"2":{start:{line:5,column:13},end:{line:5,column:29}},"3":{start:{line:7,column:15},end:{line:7,column:34}},"4":{start:{line:9,column:0},end:{line:9,column:53}},"5":{start:{line:11,column:0},end:{line:35,column:2}},"6":{start:{line:12,column:2},end:{line:34,column:5}},"7":{start:{line:13,column:22},end:{line:13,column:39}},"8":{start:{line:14,column:4},end:{line:33,column:5}},"9":{start:{line:14,column:13},end:{line:17,column:7}},"10":{start:{line:17,column:12},end:{line:33,column:5}},"11":{start:{line:18,column:6},end:{line:21,column:9}},"12":{start:{line:23,column:6},end:{line:23,column:34}},"13":{start:{line:24,column:6},end:{line:32,column:9}},"14":{start:{line:25,column:8},end:{line:31,column:11}},"15":{start:{line:25,column:17},end:{line:28,column:11}},"16":{start:{line:28,column:16},end:{line:31,column:11}},"17":{start:{line:37,column:0},end:{line:90,column:2}},"18":{start:{line:38,column:2},end:{line:38,column:52}},"19":{start:{line:39,column:17},end:{line:39,column:34}},"20":{start:{line:40,column:17},end:{line:40,column:34}},"21":{start:{line:41,column:14},end:{line:41,column:28}},"22":{start:{line:43,column:2},end:{line:48,column:3}},"23":{start:{line:44,column:4},end:{line:46,column:7}},"24":{start:{line:47,column:4},end:{line:47,column:11}},"25":{start:{line:50,column:2},end:{line:55,column:3}},"26":{start:{line:51,column:4},end:{line:53,column:7}},"27":{start:{line:54,column:4},end:{line:54,column:11}},"28":{start:{line:57,column:2},end:{line:62,column:3}},"29":{start:{line:58,column:4},end:{line:60,column:7}},"30":{start:{line:61,column:4},end:{line:61,column:11}},"31":{start:{line:64,column:2},end:{line:89,column:5}},"32":{start:{line:67,column:4},end:{line:73,column:5}},"33":{start:{line:68,column:6},end:{line:71,column:9}},"34":{start:{line:72,column:6},end:{line:72,column:13}},"35":{start:{line:75,column:15},end:{line:79,column:6}},"36":{start:{line:80,column:4},end:{line:88,column:7}},"37":{start:{line:81,column:6},end:{line:87,column:9}},"38":{start:{line:81,column:15},end:{line:84,column:9}},"39":{start:{line:84,column:14},end:{line:87,column:9}},"40":{start:{line:92,column:0},end:{line:125,column:2}},"41":{start:{line:93,column:2},end:{line:93,column:52}},"42":{start:{line:94,column:17},end:{line:94,column:34}},"43":{start:{line:95,column:17},end:{line:95,column:34}},"44":{start:{line:97,column:2},end:{line:102,column:3}},"45":{start:{line:98,column:4},end:{line:100,column:7}},"46":{start:{line:101,column:4},end:{line:101,column:11}},"47":{start:{line:104,column:2},end:{line:124,column:5}},"48":{start:{line:107,column:4},end:{line:123,column:5}},"49":{start:{line:108,column:6},end:{line:114,column:7}},"50":{start:{line:109,column:8},end:{line:112,column:11}},"51":{start:{line:113,column:8},end:{line:113,column:15}},"52":{start:{line:116,column:6},end:{line:118,column:9}},"53":{start:{line:120,column:6},end:{line:122,column:9}},"54":{start:{line:127,column:0},end:{line:137,column:2}},"55":{start:{line:128,column:2},end:{line:128,column:52}},"56":{start:{line:129,column:2},end:{line:136,column:5}},"57":{start:{line:132,column:4},end:{line:135,column:53}},"58":{start:{line:132,column:13},end:{line:135,column:7}},"59":{start:{line:135,column:12},end:{line:135,column:53}},"60":{start:{line:139,column:0},end:{line:139,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:36},end:{line:35,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:31},end:{line:12,column:32}},loc:{start:{line:12,column:52},end:{line:34,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:16},end:{line:24,column:17}},loc:{start:{line:24,column:31},end:{line:32,column:7}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:32},end:{line:90,column:1}},line:37},"4":{name:"(anonymous_4)",decl:{start:{line:66,column:5},end:{line:66,column:6}},loc:{start:{line:66,column:26},end:{line:89,column:3}},line:66},"5":{name:"(anonymous_5)",decl:{start:{line:80,column:14},end:{line:80,column:15}},loc:{start:{line:80,column:29},end:{line:88,column:5}},line:80},"6":{name:"(anonymous_6)",decl:{start:{line:92,column:15},end:{line:92,column:16}},loc:{start:{line:92,column:29},end:{line:125,column:1}},line:92},"7":{name:"(anonymous_7)",decl:{start:{line:106,column:5},end:{line:106,column:6}},loc:{start:{line:106,column:26},end:{line:124,column:3}},line:106},"8":{name:"(anonymous_8)",decl:{start:{line:127,column:18},end:{line:127,column:19}},loc:{start:{line:127,column:32},end:{line:137,column:1}},line:127},"9":{name:"(anonymous_9)",decl:{start:{line:131,column:5},end:{line:131,column:6}},loc:{start:{line:131,column:26},end:{line:136,column:3}},line:131}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:33,column:5}},{start:{line:14,column:4},end:{line:33,column:5}}],line:14},"1":{loc:{start:{line:17,column:12},end:{line:33,column:5}},type:"if",locations:[{start:{line:17,column:12},end:{line:33,column:5}},{start:{line:17,column:12},end:{line:33,column:5}}],line:17},"2":{loc:{start:{line:25,column:8},end:{line:31,column:11}},type:"if",locations:[{start:{line:25,column:8},end:{line:31,column:11}},{start:{line:25,column:8},end:{line:31,column:11}}],line:25},"3":{loc:{start:{line:43,column:2},end:{line:48,column:3}},type:"if",locations:[{start:{line:43,column:2},end:{line:48,column:3}},{start:{line:43,column:2},end:{line:48,column:3}}],line:43},"4":{loc:{start:{line:50,column:2},end:{line:55,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:55,column:3}},{start:{line:50,column:2},end:{line:55,column:3}}],line:50},"5":{loc:{start:{line:57,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:62,column:3}},{start:{line:57,column:2},end:{line:62,column:3}}],line:57},"6":{loc:{start:{line:67,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:73,column:5}},{start:{line:67,column:4},end:{line:73,column:5}}],line:67},"7":{loc:{start:{line:81,column:6},end:{line:87,column:9}},type:"if",locations:[{start:{line:81,column:6},end:{line:87,column:9}},{start:{line:81,column:6},end:{line:87,column:9}}],line:81},"8":{loc:{start:{line:97,column:2},end:{line:102,column:3}},type:"if",locations:[{start:{line:97,column:2},end:{line:102,column:3}},{start:{line:97,column:2},end:{line:102,column:3}}],line:97},"9":{loc:{start:{line:97,column:6},end:{line:97,column:38}},type:"binary-expr",locations:[{start:{line:97,column:6},end:{line:97,column:20}},{start:{line:97,column:24},end:{line:97,column:38}}],line:97},"10":{loc:{start:{line:107,column:4},end:{line:123,column:5}},type:"if",locations:[{start:{line:107,column:4},end:{line:123,column:5}},{start:{line:107,column:4},end:{line:123,column:5}}],line:107},"11":{loc:{start:{line:108,column:6},end:{line:114,column:7}},type:"if",locations:[{start:{line:108,column:6},end:{line:114,column:7}},{start:{line:108,column:6},end:{line:114,column:7}}],line:108},"12":{loc:{start:{line:132,column:4},end:{line:135,column:53}},type:"if",locations:[{start:{line:132,column:4},end:{line:135,column:53}},{start:{line:132,column:4},end:{line:135,column:53}}],line:132}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"5f2a047b90032e678ff2535717ff969fa7621fa1"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();let User=(cov_docl10t1r.s[0]++,require("../models/user"));let express=(cov_docl10t1r.s[1]++,require("express"));let router=(cov_docl10t1r.s[2]++,express.Router());let mongoose=(cov_docl10t1r.s[3]++,require("mongoose"));cov_docl10t1r.s[4]++;mongoose.connect("mongodb://localhost:27017/novels");cov_docl10t1r.s[5]++;router.editPassword=(req,res)=>{cov_docl10t1r.f[0]++;cov_docl10t1r.s[6]++;User.findById(req.params.id,function(err,user){cov_docl10t1r.f[1]++;var newpassword=(cov_docl10t1r.s[7]++,req.body.password);cov_docl10t1r.s[8]++;if(err){cov_docl10t1r.b[0][0]++;cov_docl10t1r.s[9]++;res.json({message:"User NOT Found!",errmsg:err});}else{cov_docl10t1r.b[0][1]++;cov_docl10t1r.s[10]++;if(user.password==newpassword){cov_docl10t1r.b[1][0]++;cov_docl10t1r.s[11]++;res.json({message:"No change to the Password",data:user});}else{cov_docl10t1r.b[1][1]++;cov_docl10t1r.s[12]++;user.password=newpassword;cov_docl10t1r.s[13]++;user.save(function(err){cov_docl10t1r.f[2]++;cov_docl10t1r.s[14]++;if(err){cov_docl10t1r.b[2][0]++;cov_docl10t1r.s[15]++;res.json({message:"Password Not changed!",errmsg:err});}else{cov_docl10t1r.b[2][1]++;cov_docl10t1r.s[16]++;res.json({message:"Password Successfully changed!",data:user});}});}}});};cov_docl10t1r.s[17]++;router.register=(req,res)=>{cov_docl10t1r.f[3]++;cov_docl10t1r.s[18]++;res.setHeader("Content-Type","application/json");var username=(cov_docl10t1r.s[19]++,req.body.username);var password=(cov_docl10t1r.s[20]++,req.body.password);var email=(cov_docl10t1r.s[21]++,req.body.email);cov_docl10t1r.s[22]++;if(username==""){cov_docl10t1r.b[3][0]++;cov_docl10t1r.s[23]++;res.json({message:"The username can not be empty"});cov_docl10t1r.s[24]++;return;}else{cov_docl10t1r.b[3][1]++;}cov_docl10t1r.s[25]++;if(password==""){cov_docl10t1r.b[4][0]++;cov_docl10t1r.s[26]++;res.json({message:"The password can not be empty"});cov_docl10t1r.s[27]++;return;}else{cov_docl10t1r.b[4][1]++;}cov_docl10t1r.s[28]++;if(email==""){cov_docl10t1r.b[5][0]++;cov_docl10t1r.s[29]++;res.json({message:"The email can not be empty"});cov_docl10t1r.s[30]++;return;}else{cov_docl10t1r.b[5][1]++;}cov_docl10t1r.s[31]++;User.findOne({username:username},function(err,info){cov_docl10t1r.f[4]++;cov_docl10t1r.s[32]++;if(info){cov_docl10t1r.b[6][0]++;cov_docl10t1r.s[33]++;res.json({message:"The username is occupied",errmsg:err});cov_docl10t1r.s[34]++;return;}else{cov_docl10t1r.b[6][1]++;}var user=(cov_docl10t1r.s[35]++,new User({username:username,password:password,email:email}));cov_docl10t1r.s[36]++;user.save(function(err){cov_docl10t1r.f[5]++;cov_docl10t1r.s[37]++;if(err){cov_docl10t1r.b[7][0]++;cov_docl10t1r.s[38]++;res.json({message:"User Not Registered",errmsg:err});}else{cov_docl10t1r.b[7][1]++;cov_docl10t1r.s[39]++;res.json({message:"User Successfully registered",data:user});}});});};cov_docl10t1r.s[40]++;router.login=(req,res)=>{cov_docl10t1r.f[6]++;cov_docl10t1r.s[41]++;res.setHeader("Content-Type","application/json");var username=(cov_docl10t1r.s[42]++,req.body.username);var password=(cov_docl10t1r.s[43]++,req.body.password);cov_docl10t1r.s[44]++;if((cov_docl10t1r.b[9][0]++,password=="")||(cov_docl10t1r.b[9][1]++,username=="")){cov_docl10t1r.b[8][0]++;cov_docl10t1r.s[45]++;res.json({message:"The username or password  can not be empty"});cov_docl10t1r.s[46]++;return;}else{cov_docl10t1r.b[8][1]++;}cov_docl10t1r.s[47]++;User.findOne({username:username},function(err,user){cov_docl10t1r.f[7]++;cov_docl10t1r.s[48]++;if(user){cov_docl10t1r.b[10][0]++;cov_docl10t1r.s[49]++;if(user.password==password){cov_docl10t1r.b[11][0]++;cov_docl10t1r.s[50]++;res.json({message:"Sign in Successfully",data:user});cov_docl10t1r.s[51]++;return;}else{cov_docl10t1r.b[11][1]++;}cov_docl10t1r.s[52]++;res.json({message:"Wrong Password"});}else{cov_docl10t1r.b[10][1]++;cov_docl10t1r.s[53]++;res.json({message:"Username is not exist"});}});};cov_docl10t1r.s[54]++;router.userInfo=(req,res)=>{cov_docl10t1r.f[8]++;cov_docl10t1r.s[55]++;res.setHeader("Content-Type","application/json");cov_docl10t1r.s[56]++;User.find({"_id":req.params.id},function(err,user){cov_docl10t1r.f[9]++;cov_docl10t1r.s[57]++;if(err){cov_docl10t1r.b[12][0]++;cov_docl10t1r.s[58]++;res.json({message:"User NOT Found!",errmsg:err});}else{cov_docl10t1r.b[12][1]++;cov_docl10t1r.s[59]++;res.send(JSON.stringify(user,null,10));}});};cov_docl10t1r.s[60]++;module.exports=router;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsInJlcXVpcmUiLCJleHByZXNzIiwicm91dGVyIiwiUm91dGVyIiwibW9uZ29vc2UiLCJjb25uZWN0IiwiZWRpdFBhc3N3b3JkIiwicmVxIiwicmVzIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsImVyciIsInVzZXIiLCJuZXdwYXNzd29yZCIsImJvZHkiLCJwYXNzd29yZCIsImpzb24iLCJtZXNzYWdlIiwiZXJybXNnIiwiZGF0YSIsInNhdmUiLCJyZWdpc3RlciIsInNldEhlYWRlciIsInVzZXJuYW1lIiwiZW1haWwiLCJmaW5kT25lIiwiaW5mbyIsImxvZ2luIiwidXNlckluZm8iLCJmaW5kIiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxnQkFBRCxDQUFsQjs7QUFDQSxJQUFJQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlFLE1BQU0sR0FBR0QsT0FBTyxDQUFDRSxNQUFSLEVBQWI7O0FBQ0EsSUFBSUMsUUFBUSxHQUFHSixPQUFPLENBQUMsVUFBRCxDQUF0Qjs7QUFDQUksUUFBUSxDQUFDQyxPQUFULENBQWlCLGtDQUFqQjs7QUFJQUgsTUFBTSxDQUFDSSxZQUFQLEdBQXNCLENBQUNDLEdBQUQsRUFBS0MsR0FBTCxLQUFXO0FBRTdCVCxFQUFBQSxJQUFJLENBQUNVLFFBQUwsQ0FBY0YsR0FBRyxDQUFDRyxNQUFKLENBQVdDLEVBQXpCLEVBQTZCLFVBQVNDLEdBQVQsRUFBYUMsSUFBYixFQUFtQjtBQUM1QyxRQUFJQyxXQUFXLEdBQUdQLEdBQUcsQ0FBQ1EsSUFBSixDQUFTQyxRQUEzQjtBQUNBLFFBQUlKLEdBQUosRUFDSUosR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsTUFBQUEsT0FBTyxFQUFFLGlCQUFYO0FBQThCQyxNQUFBQSxNQUFNLEVBQUdQ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QUcsQ0FBQ0csTUFBSixDQUFXQztBQUFyQixHQUFWLEVBQW9DLFVBQVNDLEdBQVQsRUFBY0MsSUFBZCxFQUFvQjtBQUNwRCxRQUFJRCxHQUFKLEVBQ0lKLEdBQUcsQ0FBQ1MsSUFBSixDQUFTO0FBQUVDLE1BQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QkMsTUFBQUEsTUFBTSxFQUFHUDtBQUF2QyxLQUFULEVBREosS0FHSUosR0FBRyxDQUFDdUIsSUFBSixDQUFTQyxJQUFJLENBQUNDLFNBQUwsQ0FBZXBCLElBQWYsRUFBb0IsSUFBcEIsRUFBeUIsRUFBekIsQ0FBVDtBQUNQLEdBTEQ7QUFNSCxDQVZEOztBQVdBcUIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakMsTUFBakIiLCJzb3VyY2VSb290IjoiRTpcXHh1ZXlpXFwyMDIw77yIMe+8iVxcQVNcXE5vdmVsSWRlYXMtbWFzdGVyXFxOb3ZlbElkZWFzLW1hc3Rlclxccm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZXJcIilcclxubGV0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKVxyXG5sZXQgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxyXG5sZXQgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIilcclxubW9uZ29vc2UuY29ubmVjdChcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvbm92ZWxzXCIpXHJcblxyXG5cclxuXHJcbnJvdXRlci5lZGl0UGFzc3dvcmQgPSAocmVxLHJlcyk9PntcclxuXHJcbiAgICBVc2VyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVycix1c2VyKSB7XHJcbiAgICAgICAgdmFyIG5ld3Bhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmRcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiVXNlciBOT1QgRm91bmQhXCIsIGVycm1zZyA6IGVyciB9IClcclxuICAgICAgICBlbHNlIGlmKHVzZXIucGFzc3dvcmQgPT0gbmV3cGFzc3dvcmQpe1xyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiTm8gY2hhbmdlIHRvIHRoZSBQYXNzd29yZFwiLCBkYXRhOiB1c2VyfSApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB1c2VyLnBhc3N3b3JkID0gbmV3cGFzc3dvcmRcclxuICAgICAgICAgICAgdXNlci5zYXZlKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlBhc3N3b3JkIE5vdCBjaGFuZ2VkIVwiLCBlcnJtc2cgOiBlcnIgfSApXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlBhc3N3b3JkIFN1Y2Nlc3NmdWxseSBjaGFuZ2VkIVwiLCBkYXRhOiB1c2VyIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxucm91dGVyLnJlZ2lzdGVyID0gKHJlcSxyZXMpID0+IHtcclxuICAgIHJlcy5zZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcblxyXG4gICAgdmFyIHVzZXJuYW1lID0gcmVxLmJvZHkudXNlcm5hbWVcclxuICAgIHZhciBwYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkXHJcbiAgICB2YXIgZW1haWwgPSByZXEuYm9keS5lbWFpbFxyXG5cclxuXHJcbiAgICBpZiggdXNlcm5hbWUgPT0gXCJcIil7XHJcbiAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlRoZSB1c2VybmFtZSBjYW4gbm90IGJlIGVtcHR5XCJ9IClcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmKCBwYXNzd29yZCA9PSBcIlwiKXtcclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiVGhlIHBhc3N3b3JkIGNhbiBub3QgYmUgZW1wdHlcIn0gKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYoIGVtYWlsID09IFwiXCIpe1xyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJUaGUgZW1haWwgY2FuIG5vdCBiZSBlbXB0eVwifSApXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgIHVzZXJuYW1lOnVzZXJuYW1lXHJcbiAgICB9LGZ1bmN0aW9uIChlcnIsIGluZm8pIHtcclxuICAgICAgICBpZihpbmZvKXtcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlRoZSB1c2VybmFtZSBpcyBvY2N1cGllZFwiLGVycm1zZyA6IGVycn0gKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICBlbWFpbDplbWFpbFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdXNlci5zYXZlKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlVzZXIgTm90IFJlZ2lzdGVyZWRcIiwgZXJybXNnIDogZXJyIH0gKVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiVXNlciBTdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZFwiLCBkYXRhOiB1c2VyIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5yb3V0ZXIubG9naW4gPSAocmVxLHJlcykgPT4ge1xyXG4gICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuXHJcbiAgICB2YXIgdXNlcm5hbWUgPSByZXEuYm9keS51c2VybmFtZVxyXG4gICAgdmFyIHBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmRcclxuXHJcbiAgICBpZihwYXNzd29yZCA9PSBcIlwifHwgdXNlcm5hbWU9PVwiXCIpe1xyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJUaGUgdXNlcm5hbWUgb3IgcGFzc3dvcmQgIGNhbiBub3QgYmUgZW1wdHlcIn0gKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgVXNlci5maW5kT25lKHtcclxuICAgICAgICB1c2VybmFtZTp1c2VybmFtZVxyXG4gICAgfSxmdW5jdGlvbiAoZXJyLCB1c2VyKSB7XHJcbiAgICAgICAgaWYodXNlcil7XHJcbiAgICAgICAgICAgIGlmKHVzZXIucGFzc3dvcmQgPT0gcGFzc3dvcmQpe1xyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlNpZ24gaW4gU3VjY2Vzc2Z1bGx5XCIsZGF0YTp1c2VyfSlcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJXcm9uZyBQYXNzd29yZFwifSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlVzZXJuYW1lIGlzIG5vdCBleGlzdFwifSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxucm91dGVyLnVzZXJJbmZvID0gKHJlcSwgcmVzKSA9PiB7XHJcblxyXG4gICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuXHJcbiAgICBVc2VyLmZpbmQoeyBcIl9pZFwiIDogcmVxLnBhcmFtcy5pZCB9LGZ1bmN0aW9uKGVyciwgdXNlcikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJVc2VyIE5PVCBGb3VuZCFcIiwgZXJybXNnIDogZXJyIH0gKVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkodXNlcixudWxsLDEwKSlcclxuICAgIH0pXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXIiXX0=